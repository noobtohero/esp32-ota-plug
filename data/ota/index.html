<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ESP32 OTA Admin</title>
<link rel="stylesheet" href="/ota/style.css">
</head>
<body>

<div id="login" class="login-box">
  <h2>ğŸ” Admin Login</h2>
  <form id="login-form" onsubmit="login(); return false;">
    <input id="user" placeholder="Username" autocomplete="username">
    <input id="pass" type="password" placeholder="Password" autocomplete="current-password">
    <button type="submit">Login</button>
  </form>
  <p id="login-msg"></p>
  <p class="version-info">Current OTA Version: <b id="ota-version">-</b></p>
</div>

<div id="panel" class="container hidden">
  <h1>ESP32 OTA Panel</h1>
  <p class="subtitle">Firmware Control & Monitoring</p>

  <p id="panel-msg" class="hidden"></p> <!-- Added for upload messages -->

  <div class="card">
    <h2>â³ Progress</h2>
    <div class="progress-box">
      <div id="progress"></div>
    </div>
    <span id="progress-text">0%</span>
  </div>

  <div class="card status">
    <span id="badge">IDLE</span>
    <p>Version: <b id="version">-</b></p>
    <p>Uptime: <b id="uptime">-</b></p>
    <p id="status-msg" class="hidden">âœ… Update successful! Refreshing...</p>
  </div>

  <div class="card">
    <h2>ğŸ“¦ Manual Upload</h2>
    <input type="file" id="file">
    <button onclick="upload()">Upload</button>
  </div>

  <div class="card">
    <h2>ğŸŒ OTA from URL</h2>
    <input id="url" placeholder="https://server/firmware.bin">
    <button onclick="updateFromURL()">Update</button>
  </div>

  <footer>ESP32 OTA â€¢ Rollback Protected</footer>
</div>

<script src="/ota/app.js"></script>
</body>
</html>
